"use strict";exports.id=723,exports.ids=[723],exports.modules={4723:(e,s,i)=>{i.r(s),i.d(s,{default:()=>w});var a=i(5512),l=i(8009),n=i(6873),t=i(8741),c=i(3286),o=i(9656),r=i(3680),d=i(1242),m=i(5917),x=i(12),u=i(8272),h=i(9859),j=i(2339),p=i(3928),g=i(7325),f=i(8884),C=i(1117),N=i(905),v=i(5842);let w=()=>{let[e,s]=(0,l.useState)([]),[i,w]=(0,l.useState)(null),[I,b]=(0,l.useState)([]),[y,S]=(0,l.useState)(""),[k,O]=(0,l.useState)(!1),[z,q]=(0,l.useState)(null),[A,E]=(0,l.useState)(!1),[J,T]=(0,l.useState)(!1),M=(0,l.useCallback)(async()=>{let{data:e}=await v.N.from("pacientes").select("*").order("codigo");e&&s(e)},[]),U=(0,l.useCallback)(async()=>{if(!i)return;let{data:e}=await v.N.from("pensamientos").select("*").eq("paciente_id",i.id).order("codigo");e&&b(e)},[i]),Y=async()=>{i&&z?.codigo&&z?.pensamiento&&(A&&z.id?await v.N.from("pensamientos").update({codigo:z.codigo,pensamiento:z.pensamiento}).eq("id",z.id):await v.N.from("pensamientos").insert({...z,paciente_id:i.id}),O(!1),q(null),U())},Z=async()=>{z?.id&&(await v.N.from("pensamientos").delete().eq("id",z.id),T(!1),q(null),U())};(0,l.useEffect)(()=>{M()},[M]),(0,l.useEffect)(()=>{i&&U()},[i,U]);let L=I.filter(e=>e.codigo.toLowerCase().includes(y.toLowerCase())||e.pensamiento.toLowerCase().includes(y.toLowerCase()));return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-4",children:[(0,a.jsx)(d.Z,{className:"mb-4",children:(0,a.jsx)(m.U,{children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[(0,a.jsx)(x.d,{label:"Seleccionar Paciente",placeholder:"Seleccione un paciente",className:"w-full md:w-80",value:i?.id?.toString(),onChange:s=>{w(e.find(e=>e.id?.toString()===s.target.value)||null)},children:e.map(e=>(0,a.jsxs)(u.y,{value:e.id,children:[e.codigo," - ",e.nombre]},e.id))}),(0,a.jsxs)("div",{className:"flex gap-2 w-full md:w-auto",children:[(0,a.jsx)(h.r,{placeholder:"Buscar pensamientos...",value:y,onChange:e=>S(e.target.value),startContent:(0,a.jsx)(n.A,{className:"w-4 h-4"}),className:"w-full md:w-60"}),(0,a.jsx)(j.T,{color:"primary",onClick:()=>{E(!1),q({codigo:"",pensamiento:"",paciente_id:i?.id||0}),O(!0)},isDisabled:!i,startContent:(0,a.jsx)(t.A,{}),children:"Nuevo"})]})]})})}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:L.map(e=>(0,a.jsx)(d.Z,{className:"hover:shadow-lg transition-shadow",children:(0,a.jsx)(m.U,{children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("div",{className:"font-medium text-primary",children:e.codigo}),(0,a.jsx)("div",{className:"mt-2 text-default-600",children:e.pensamiento})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,a.jsx)(j.T,{isIconOnly:!0,variant:"light",onClick:()=>{E(!0),q(e),O(!0)},children:(0,a.jsx)(c.A,{className:"w-4 h-4"})}),(0,a.jsx)(j.T,{isIconOnly:!0,variant:"light",color:"danger",onClick:()=>{q(e),T(!0)},children:(0,a.jsx)(o.A,{className:"w-4 h-4"})})]})]})})},e.id))})]}),(0,a.jsx)(p.Y,{isOpen:k,onClose:()=>O(!1),children:(0,a.jsxs)(g.g,{children:[(0,a.jsx)(f.c,{children:A?"Editar Pensamiento":"Nuevo Pensamiento"}),(0,a.jsx)(C.h,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h.r,{label:"C\xf3digo",value:z?.codigo||"",onChange:e=>q(s=>s?{...s,codigo:e.target.value}:null)}),(0,a.jsx)(h.r,{label:"Pensamiento",value:z?.pensamiento||"",onChange:e=>q(s=>s?{...s,pensamiento:e.target.value}:null)})]})}),(0,a.jsxs)(N.q,{children:[(0,a.jsx)(j.T,{color:"danger",variant:"light",onClick:()=>O(!1),children:"Cancelar"}),(0,a.jsx)(j.T,{color:"primary",onClick:Y,startContent:(0,a.jsx)(r.A,{}),children:"Guardar"})]})]})}),(0,a.jsx)(p.Y,{isOpen:J,onClose:()=>T(!1),children:(0,a.jsxs)(g.g,{children:[(0,a.jsx)(f.c,{children:"Confirmar Eliminaci\xf3n"}),(0,a.jsx)(C.h,{children:"\xbfEst\xe1 seguro que desea eliminar este pensamiento?"}),(0,a.jsxs)(N.q,{children:[(0,a.jsx)(j.T,{color:"default",variant:"light",onClick:()=>T(!1),children:"Cancelar"}),(0,a.jsx)(j.T,{color:"danger",onClick:Z,startContent:(0,a.jsx)(o.A,{}),children:"Eliminar"})]})]})})]})}},5842:(e,s,i)=>{i.d(s,{N:()=>a});let a=(0,i(6201).UU)("https://dszldxsmbcdntoxfemqt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzemxkeHNtYmNkbnRveGZlbXF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzI2Mjc5MjUsImV4cCI6MjA0ODIwMzkyNX0.hyhet-K26S5SF12gptH7yeuOfYNnRux-CziIfwDeoDI")}};