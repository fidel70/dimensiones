"use strict";exports.id=8,exports.ids=[8],exports.modules={627:(e,s,a)=>{a.r(s),a.d(s,{default:()=>k});var i=a(5512),l=a(5842),t=a(8009),n=a(3917),d=a(4977),c=a(5723),r=a(8397),m=a(8638),o=a(8755),x=a(8896),u=a(1242),h=a(5917),j=a(12),p=a(8272),f=a(1766),g=a(2339),N=a(7294),b=a(9859),v=a(6382),y=a(4873),w=a(7811),I=a(2692),S=a(9826),C=a(2407),D=a(5707);let k=()=>{let[e,s]=(0,t.useState)(0),[a,k]=(0,t.useState)(!1),[O,z]=(0,t.useState)([]),[M,T]=(0,t.useState)(null),[A,U]=(0,t.useState)([]),[Z,J]=(0,t.useState)(null),[E,X]=(0,t.useState)(0),[_,q]=(0,t.useState)(0),[F,G]=(0,t.useState)(""),[P,R]=(0,t.useState)(0),[V,Y]=(0,t.useState)([]),[H,K]=(0,t.useState)(!1),Q=(0,t.useCallback)(async()=>{let{data:e}=await l.N.from("pacientes").select("*").order("codigo");e&&z(e)},[]),B=(0,t.useCallback)(async()=>{if(!M)return;let{data:e}=await l.N.from("pensamientos").select("*").eq("paciente_id",M.id).order("codigo");e&&(U(e),X(0),J(e[0]||null))},[M]),L=(0,t.useCallback)(async()=>{if(!Z)return;let e=new Date().toISOString().split("T")[0],[{data:a},{data:i}]=await Promise.all([l.N.from("dimensiones").select("*").eq("pensamiento_id",Z.id).eq("fecha",e),l.N.rpc("sum_cantidad",{pensamiento_id:Z.id,fecha:e})]);a&&Y(a),null!==i&&s(i)},[Z]);(0,t.useEffect)(()=>{Q()},[Q]),(0,t.useEffect)(()=>{B()},[B,M]),(0,t.useEffect)(()=>{L()},[Z,L]);let $=async e=>{if(e.preventDefault(),!Z)return;let s=new Date().toISOString().split("T")[0],{data:a,error:i}=await l.N.from("dimensiones").insert({pensamiento_id:Z.id,fecha:s,cantidad:_,duracion:F?parseInt(F):null,intensidad:P});if(i){console.error("Error al guardar:",i);return}q(0),G(""),R(0),L(),K(!0),setTimeout(()=>K(!1),3e3)},W=e=>{let s="up"===e?Math.max(0,E-1):Math.min(A.length-1,E+1);X(s),J(A[s])};return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 p-6",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,i.jsx)(u.Z,{children:(0,i.jsx)(h.U,{children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(d.A,{className:"w-6 h-6 text-primary"}),(0,i.jsx)(j.d,{label:"Seleccionar Paciente",placeholder:"Seleccione un paciente",className:"w-full md:w-80",selectedKeys:M?[M.id.toString()]:[],onChange:e=>{let s=e.target.value;T(O.find(e=>e.id.toString()===s)||null)},children:O.map(e=>(0,i.jsxs)(p.y,{value:e.id.toString(),children:[e.codigo," - ",e.nombre]},e.id))})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 bg-default-100 px-4 py-2 rounded-lg",children:[(0,i.jsx)(c.A,{className:"w-5 h-5 text-default-500"}),(0,i.jsx)("span",{className:"font-medium",children:(0,n.GP)(new Date,"dd/MM/yyyy")})]})]})})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)(u.Z,{children:[(0,i.jsxs)(f.d,{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(r.A,{className:"w-5 h-5 text-primary"}),(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"Pensamientos"})]}),(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)(g.T,{isIconOnly:!0,variant:"light",onClick:()=>W("up"),isDisabled:0===E,children:(0,i.jsx)(m.A,{className:"w-4 h-4"})}),(0,i.jsx)(g.T,{isIconOnly:!0,variant:"light",onClick:()=>W("down"),isDisabled:E===A.length-1,children:(0,i.jsx)(o.A,{className:"w-4 h-4"})})]})]}),(0,i.jsx)(N.y,{}),(0,i.jsx)(h.U,{className:"h-[calc(100vh-400px)] overflow-y-auto p-0",children:A.map((e,s)=>(0,i.jsxs)("div",{onClick:()=>{X(s),J(e)},className:`p-4 cursor-pointer border-b transition-colors
                    ${s===E?"bg-default-100":"hover:bg-default-50"}`,children:[(0,i.jsx)("div",{className:"font-medium text-primary",children:e.codigo}),(0,i.jsx)("div",{className:"mt-1 text-default-600",children:e.pensamiento})]},e.id))})]}),(0,i.jsxs)(u.Z,{children:[(0,i.jsxs)(f.d,{className:"flex items-center gap-2",children:[(0,i.jsx)(x.A,{className:"w-5 h-5 text-primary"}),(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"Dimensiones"})]}),(0,i.jsx)(N.y,{}),(0,i.jsx)(h.U,{children:Z?(0,i.jsxs)("form",{onSubmit:$,className:"space-y-6",children:[H&&(0,i.jsx)("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4",role:"alert",children:(0,i.jsx)("p",{children:"Dimension guardada correctamente"})}),(0,i.jsx)(u.Z,{children:(0,i.jsxs)(h.U,{className:"bg-default-50",children:[(0,i.jsx)("div",{className:"font-medium text-primary",children:Z.codigo}),(0,i.jsx)("div",{className:"mt-2 text-default-600",children:Z.pensamiento})]})}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-default-50 p-4 rounded-lg",children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Cantidad de veces"}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)(g.T,{isIconOnly:!0,variant:"bordered",onClick:()=>_>0&&q(e=>e-1),children:"-"}),(0,i.jsx)("span",{className:"text-xl font-medium w-12 text-center",children:_}),(0,i.jsx)(g.T,{isIconOnly:!0,variant:"bordered",onClick:()=>q(e=>e+1),children:"+"})]})]}),(0,i.jsx)("div",{className:"bg-default-50 p-4 rounded-lg",children:(0,i.jsx)(b.r,{type:"number",label:"Duraci\xf3n (minutos)",value:F,onChange:e=>G(e.target.value)})}),(0,i.jsxs)("div",{className:"bg-default-50 p-4 rounded-lg",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Intensidad (",P,"/10)"]}),(0,i.jsx)(v.Q,{size:"sm",step:1,maxValue:10,minValue:0,value:P,onChange:e=>R(Number(e)),className:"max-w-xs"})]})]}),(0,i.jsx)(g.T,{type:"submit",color:"primary",className:"w-full",size:"lg",children:"Guardar Dimensi\xf3n"}),V.length>0&&(0,i.jsxs)("div",{className:"mt-8",children:[(0,i.jsxs)("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[(0,i.jsx)(x.A,{className:"w-4 h-4"}),"Dimensiones registradas hoy"]}),(0,i.jsxs)(y.j,{"aria-label":"Dimensiones registradas",children:[(0,i.jsxs)(w.X,{children:[(0,i.jsx)(I.e,{children:"Cantidad"}),(0,i.jsx)(I.e,{children:"Duraci\xf3n"}),(0,i.jsx)(I.e,{children:"Intensidad"})]}),(0,i.jsx)(S.E,{children:V.map(e=>(0,i.jsxs)(C.s,{children:[(0,i.jsx)(D.w,{children:e.cantidad}),(0,i.jsx)(D.w,{children:e.duracion||"-"}),(0,i.jsx)(D.w,{children:e.intensidad})]},e.id))})]})]}),(0,i.jsx)("div",{className:"mt-4 bg-default-100 p-4 rounded-lg",children:(0,i.jsxs)("p",{className:"font-medium",children:["Total cantidad de veces: ",e]})})]}):(0,i.jsx)("div",{className:"text-center py-12 text-default-500",children:"Selecciona un pensamiento para registrar dimensiones"})})]})]})]})})}},5842:(e,s,a)=>{a.d(s,{N:()=>i});let i=(0,a(6201).UU)("https://dszldxsmbcdntoxfemqt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzemxkeHNtYmNkbnRveGZlbXF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzI2Mjc5MjUsImV4cCI6MjA0ODIwMzkyNX0.hyhet-K26S5SF12gptH7yeuOfYNnRux-CziIfwDeoDI")}};