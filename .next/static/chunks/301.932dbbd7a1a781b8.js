"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{7301:(e,s,a)=>{a.r(s),a.d(s,{default:()=>D});var l=a(5155),i=a(1712),n=a(2115),t=a(9253),d=a(2823),c=a(2423),r=a(8207),m=a(1902),o=a(1719),x=a(6745),u=a(8696),h=a(7803),j=a(6591),p=a(1181),f=a(9020),N=a(8862),g=a(532),b=a(6097),v=a(6648),y=a(6491),w=a(6605),I=a(3800),S=a(588),C=a(1634),k=a(633);let D=()=>{let[e,s]=(0,n.useState)(0),[a,D]=(0,n.useState)(!1),[O,z]=(0,n.useState)([]),[M,T]=(0,n.useState)(null),[_,A]=(0,n.useState)([]),[E,U]=(0,n.useState)(null),[Z,J]=(0,n.useState)(0),[X,q]=(0,n.useState)(0),[F,G]=(0,n.useState)(""),[P,R]=(0,n.useState)(0),[V,Y]=(0,n.useState)([]),[H,K]=(0,n.useState)(!1),Q=(0,n.useCallback)(async()=>{let{data:e}=await i.N.from("pacientes").select("*").order("codigo");e&&z(e)},[]),B=(0,n.useCallback)(async()=>{if(!M)return;let{data:e}=await i.N.from("pensamientos").select("*").eq("paciente_id",M.id).order("codigo");e&&(A(e),J(0),U(e[0]||null))},[M]),L=(0,n.useCallback)(async()=>{if(!E)return;let e=new Date().toISOString().split("T")[0],[{data:a},{data:l}]=await Promise.all([i.N.from("dimensiones").select("*").eq("pensamiento_id",E.id).eq("fecha",e),i.N.rpc("sum_cantidad",{pensamiento_id:E.id,fecha:e})]);a&&Y(a),null!==l&&s(l)},[E]);(0,n.useEffect)(()=>{Q()},[Q]),(0,n.useEffect)(()=>{B()},[B,M]),(0,n.useEffect)(()=>{L()},[E,L]);let W=async e=>{if(e.preventDefault(),!E)return;let s=new Date().toISOString().split("T")[0],{data:a,error:l}=await i.N.from("dimensiones").insert({pensamiento_id:E.id,fecha:s,cantidad:X,duracion:F?parseInt(F):null,intensidad:P});if(l){console.error("Error al guardar:",l);return}q(0),G(""),R(0),L(),K(!0),setTimeout(()=>K(!1),3e3)},$=e=>{let s="up"===e?Math.max(0,Z-1):Math.min(_.length-1,Z+1);J(s),U(_[s])};return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 p-6",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,l.jsx)(u.Z,{children:(0,l.jsx)(h.U,{children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(d.A,{className:"w-6 h-6 text-primary"}),(0,l.jsx)(j.d,{label:"Seleccionar Paciente",placeholder:"Seleccione un paciente",className:"w-full md:w-80",selectedKeys:M?[M.id.toString()]:[],onChange:e=>{let s=e.target.value;T(O.find(e=>e.id.toString()===s)||null)},children:O.map(e=>(0,l.jsxs)(p.y,{value:e.id.toString(),children:[e.codigo," - ",e.nombre]},e.id))})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 bg-default-100 px-4 py-2 rounded-lg",children:[(0,l.jsx)(c.A,{className:"w-5 h-5 text-default-500"}),(0,l.jsx)("span",{className:"font-medium",children:(0,t.GP)(new Date,"dd/MM/yyyy")})]})]})})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)(u.Z,{children:[(0,l.jsxs)(f.d,{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(r.A,{className:"w-5 h-5 text-primary"}),(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Pensamientos"})]}),(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)(N.T,{isIconOnly:!0,variant:"light",onClick:()=>$("up"),isDisabled:0===Z,children:(0,l.jsx)(m.A,{className:"w-4 h-4"})}),(0,l.jsx)(N.T,{isIconOnly:!0,variant:"light",onClick:()=>$("down"),isDisabled:Z===_.length-1,children:(0,l.jsx)(o.A,{className:"w-4 h-4"})})]})]}),(0,l.jsx)(g.y,{}),(0,l.jsx)(h.U,{className:"h-[calc(100vh-400px)] overflow-y-auto p-0",children:_.map((e,s)=>(0,l.jsxs)("div",{onClick:()=>{J(s),U(e)},className:"p-4 cursor-pointer border-b transition-colors\n                    ".concat(s===Z?"bg-default-100":"hover:bg-default-50"),children:[(0,l.jsx)("div",{className:"font-medium text-primary",children:e.codigo}),(0,l.jsx)("div",{className:"mt-1 text-default-600",children:e.pensamiento})]},e.id))})]}),(0,l.jsxs)(u.Z,{children:[(0,l.jsxs)(f.d,{className:"flex items-center gap-2",children:[(0,l.jsx)(x.A,{className:"w-5 h-5 text-primary"}),(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Dimensiones"})]}),(0,l.jsx)(g.y,{}),(0,l.jsx)(h.U,{children:E?(0,l.jsxs)("form",{onSubmit:W,className:"space-y-6",children:[H&&(0,l.jsx)("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4",role:"alert",children:(0,l.jsx)("p",{children:"Dimension guardada correctamente"})}),(0,l.jsx)(u.Z,{children:(0,l.jsxs)(h.U,{className:"bg-default-50",children:[(0,l.jsx)("div",{className:"font-medium text-primary",children:E.codigo}),(0,l.jsx)("div",{className:"mt-2 text-default-600",children:E.pensamiento})]})}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-default-50 p-4 rounded-lg",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Cantidad de veces"}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(N.T,{isIconOnly:!0,variant:"bordered",onClick:()=>X>0&&q(e=>e-1),children:"-"}),(0,l.jsx)("span",{className:"text-xl font-medium w-12 text-center",children:X}),(0,l.jsx)(N.T,{isIconOnly:!0,variant:"bordered",onClick:()=>q(e=>e+1),children:"+"})]})]}),(0,l.jsx)("div",{className:"bg-default-50 p-4 rounded-lg",children:(0,l.jsx)(b.r,{type:"number",label:"Duraci\xf3n (minutos)",value:F,onChange:e=>G(e.target.value)})}),(0,l.jsxs)("div",{className:"bg-default-50 p-4 rounded-lg",children:[(0,l.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Intensidad (",P,"/10)"]}),(0,l.jsx)(v.Q,{size:"sm",step:1,maxValue:10,minValue:0,value:P,onChange:e=>R(Number(e)),className:"max-w-xs"})]})]}),(0,l.jsx)(N.T,{type:"submit",color:"primary",className:"w-full",size:"lg",children:"Guardar Dimensi\xf3n"}),V.length>0&&(0,l.jsxs)("div",{className:"mt-8",children:[(0,l.jsxs)("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[(0,l.jsx)(x.A,{className:"w-4 h-4"}),"Dimensiones registradas hoy"]}),(0,l.jsxs)(y.j,{"aria-label":"Dimensiones registradas",children:[(0,l.jsxs)(w.X,{children:[(0,l.jsx)(I.e,{children:"Cantidad"}),(0,l.jsx)(I.e,{children:"Duraci\xf3n"}),(0,l.jsx)(I.e,{children:"Intensidad"})]}),(0,l.jsx)(S.E,{children:V.map(e=>(0,l.jsxs)(C.s,{children:[(0,l.jsx)(k.w,{children:e.cantidad}),(0,l.jsx)(k.w,{children:e.duracion||"-"}),(0,l.jsx)(k.w,{children:e.intensidad})]},e.id))})]})]}),(0,l.jsx)("div",{className:"mt-4 bg-default-100 p-4 rounded-lg",children:(0,l.jsxs)("p",{className:"font-medium",children:["Total cantidad de veces: ",e]})})]}):(0,l.jsx)("div",{className:"text-center py-12 text-default-500",children:"Selecciona un pensamiento para registrar dimensiones"})})]})]})]})})}},1712:(e,s,a)=>{a.d(s,{N:()=>l});let l=(0,a(5974).UU)("https://dszldxsmbcdntoxfemqt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzemxkeHNtYmNkbnRveGZlbXF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzI2Mjc5MjUsImV4cCI6MjA0ODIwMzkyNX0.hyhet-K26S5SF12gptH7yeuOfYNnRux-CziIfwDeoDI")}}]);