"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[728],{4347:(e,s,i)=>{i.r(s),i.d(s,{default:()=>w});var l=i(5155),a=i(2115),n=i(853),t=i(3473),o=i(3580),c=i(5686),d=i(7780),r=i(8696),m=i(7803),u=i(6591),h=i(1181),x=i(6097),j=i(8862),p=i(6925),g=i(8402),v=i(8684),f=i(7317),C=i(2997),N=i(1712);let w=()=>{var e;let[s,i]=(0,a.useState)([]),[w,b]=(0,a.useState)(null),[I,y]=(0,a.useState)([]),[k,S]=(0,a.useState)(""),[E,O]=(0,a.useState)(!1),[z,q]=(0,a.useState)(null),[A,J]=(0,a.useState)(!1),[T,_]=(0,a.useState)(!1),M=(0,a.useCallback)(async()=>{let{data:e}=await N.N.from("pacientes").select("*").order("codigo");e&&i(e)},[]),U=(0,a.useCallback)(async()=>{if(!w)return;let{data:e}=await N.N.from("pensamientos").select("*").eq("paciente_id",w.id).order("codigo");e&&y(e)},[w]),Y=async()=>{w&&(null==z?void 0:z.codigo)&&(null==z?void 0:z.pensamiento)&&(A&&z.id?await N.N.from("pensamientos").update({codigo:z.codigo,pensamiento:z.pensamiento}).eq("id",z.id):await N.N.from("pensamientos").insert({...z,paciente_id:w.id}),O(!1),q(null),U())},Z=async()=>{(null==z?void 0:z.id)&&(await N.N.from("pensamientos").delete().eq("id",z.id),_(!1),q(null),U())};(0,a.useEffect)(()=>{M()},[M]),(0,a.useEffect)(()=>{w&&U()},[w,U]);let L=I.filter(e=>e.codigo.toLowerCase().includes(k.toLowerCase())||e.pensamiento.toLowerCase().includes(k.toLowerCase()));return(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:[(0,l.jsxs)("div",{className:"max-w-7xl mx-auto space-y-4",children:[(0,l.jsx)(r.Z,{className:"mb-4",children:(0,l.jsx)(m.U,{children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[(0,l.jsx)(u.d,{label:"Seleccionar Paciente",placeholder:"Seleccione un paciente",className:"w-full md:w-80",value:null==w?void 0:null===(e=w.id)||void 0===e?void 0:e.toString(),onChange:e=>{b(s.find(s=>{var i;return(null===(i=s.id)||void 0===i?void 0:i.toString())===e.target.value})||null)},children:s.map(e=>(0,l.jsxs)(h.y,{value:e.id,children:[e.codigo," - ",e.nombre]},e.id))}),(0,l.jsxs)("div",{className:"flex gap-2 w-full md:w-auto",children:[(0,l.jsx)(x.r,{placeholder:"Buscar pensamientos...",value:k,onChange:e=>S(e.target.value),startContent:(0,l.jsx)(n.A,{className:"w-4 h-4"}),className:"w-full md:w-60"}),(0,l.jsx)(j.T,{color:"primary",onClick:()=>{J(!1),q({codigo:"",pensamiento:"",paciente_id:(null==w?void 0:w.id)||0}),O(!0)},isDisabled:!w,startContent:(0,l.jsx)(t.A,{}),children:"Nuevo"})]})]})})}),(0,l.jsx)("div",{className:"grid grid-cols-1 gap-4",children:L.map(e=>(0,l.jsx)(r.Z,{className:"hover:shadow-lg transition-shadow",children:(0,l.jsx)(m.U,{children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[(0,l.jsxs)("div",{className:"flex-grow",children:[(0,l.jsx)("div",{className:"font-medium text-primary",children:e.codigo}),(0,l.jsx)("div",{className:"mt-2 text-default-600",children:e.pensamiento})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,l.jsx)(j.T,{isIconOnly:!0,variant:"light",onClick:()=>{J(!0),q(e),O(!0)},children:(0,l.jsx)(o.A,{className:"w-4 h-4"})}),(0,l.jsx)(j.T,{isIconOnly:!0,variant:"light",color:"danger",onClick:()=>{q(e),_(!0)},children:(0,l.jsx)(c.A,{className:"w-4 h-4"})})]})]})})},e.id))})]}),(0,l.jsx)(p.Y,{isOpen:E,onClose:()=>O(!1),children:(0,l.jsxs)(g.g,{children:[(0,l.jsx)(v.c,{children:A?"Editar Pensamiento":"Nuevo Pensamiento"}),(0,l.jsx)(f.h,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(x.r,{label:"C\xf3digo",value:(null==z?void 0:z.codigo)||"",onChange:e=>q(s=>s?{...s,codigo:e.target.value}:null)}),(0,l.jsx)(x.r,{label:"Pensamiento",value:(null==z?void 0:z.pensamiento)||"",onChange:e=>q(s=>s?{...s,pensamiento:e.target.value}:null)})]})}),(0,l.jsxs)(C.q,{children:[(0,l.jsx)(j.T,{color:"danger",variant:"light",onClick:()=>O(!1),children:"Cancelar"}),(0,l.jsx)(j.T,{color:"primary",onClick:Y,startContent:(0,l.jsx)(d.A,{}),children:"Guardar"})]})]})}),(0,l.jsx)(p.Y,{isOpen:T,onClose:()=>_(!1),children:(0,l.jsxs)(g.g,{children:[(0,l.jsx)(v.c,{children:"Confirmar Eliminaci\xf3n"}),(0,l.jsx)(f.h,{children:"\xbfEst\xe1 seguro que desea eliminar este pensamiento?"}),(0,l.jsxs)(C.q,{children:[(0,l.jsx)(j.T,{color:"default",variant:"light",onClick:()=>_(!1),children:"Cancelar"}),(0,l.jsx)(j.T,{color:"danger",onClick:Z,startContent:(0,l.jsx)(c.A,{}),children:"Eliminar"})]})]})})]})}},1712:(e,s,i)=>{i.d(s,{N:()=>l});let l=(0,i(5974).UU)("https://dszldxsmbcdntoxfemqt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzemxkeHNtYmNkbnRveGZlbXF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzI2Mjc5MjUsImV4cCI6MjA0ODIwMzkyNX0.hyhet-K26S5SF12gptH7yeuOfYNnRux-CziIfwDeoDI")}}]);